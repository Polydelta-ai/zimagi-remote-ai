config:
    name: "remote-ai-data-#time()"
    fields:
        - name < field_preprocess
        - description < field_preprocess
        - classification_names:CONCAT:job_classifications__name:distinct=True < field_preprocess
        - predictor_raw < field_combined_text:name:append=description,classification_names;separator=","
        - predictor < field_preprocess:predictor_raw
        - target < field_bool_to_number:telework_eligible

    drop: [name, description, classification_names, predictor_raw]

run:
    remote-ai-data:
        command: "data save"
        dataset_provider_name: "collection"
        dataset_name: "@name"
        dataset_fields:
            "job:fields": "@fields"
            "job:remove_fields": "@drop"
            index_field: id
            column_prefix: false
            processors:
                - processor_drop_na
                - processor_drop_duplicates
                - processor_shuffle
